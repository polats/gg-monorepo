<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Shiny Hoarder's Delight - Goblin Gardens Splash</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600&family=Lora:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --anthropic-dark: #141413;
        --anthropic-light: #faf9f5;
        --anthropic-mid-gray: #b0aea5;
        --anthropic-light-gray: #e8e6dc;
        --anthropic-orange: #d97757;
        --anthropic-blue: #6a9bcc;
        --anthropic-green: #788c5d;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: 'Poppins', sans-serif;
        background: linear-gradient(135deg, var(--anthropic-light) 0%, #f5f3ee 100%);
        min-height: 100vh;
        color: var(--anthropic-dark);
      }

      .container {
        display: flex;
        min-height: 100vh;
        padding: 20px;
        gap: 20px;
      }

      .sidebar {
        width: 320px;
        flex-shrink: 0;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(10px);
        padding: 24px;
        border-radius: 12px;
        box-shadow: 0 10px 30px rgba(20, 20, 19, 0.1);
        overflow-y: auto;
        overflow-x: hidden;
      }

      .sidebar h1 {
        font-family: 'Lora', serif;
        font-size: 24px;
        font-weight: 500;
        color: var(--anthropic-dark);
        margin-bottom: 8px;
      }

      .sidebar .subtitle {
        color: var(--anthropic-mid-gray);
        font-size: 14px;
        margin-bottom: 32px;
        line-height: 1.4;
      }

      .control-section {
        margin-bottom: 32px;
      }

      .control-section h3 {
        font-size: 16px;
        font-weight: 600;
        color: var(--anthropic-dark);
        margin-bottom: 16px;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .control-section h3::before {
        content: '•';
        color: var(--anthropic-orange);
        font-weight: bold;
      }

      .seed-input {
        width: 100%;
        background: var(--anthropic-light);
        padding: 12px;
        border-radius: 8px;
        font-family: 'Courier New', monospace;
        font-size: 14px;
        margin-bottom: 12px;
        border: 1px solid var(--anthropic-light-gray);
        text-align: center;
      }

      .seed-input:focus {
        outline: none;
        border-color: var(--anthropic-orange);
        box-shadow: 0 0 0 2px rgba(217, 119, 87, 0.1);
        background: white;
      }

      .seed-controls {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 8px;
        margin-bottom: 8px;
      }

      .control-group {
        margin-bottom: 20px;
      }

      .control-group label {
        display: block;
        font-size: 14px;
        font-weight: 500;
        color: var(--anthropic-dark);
        margin-bottom: 8px;
      }

      .slider-container {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .slider-container input[type='range'] {
        flex: 1;
        height: 4px;
        background: var(--anthropic-light-gray);
        border-radius: 2px;
        outline: none;
        -webkit-appearance: none;
      }

      .slider-container input[type='range']::-webkit-slider-thumb {
        -webkit-appearance: none;
        width: 16px;
        height: 16px;
        background: var(--anthropic-orange);
        border-radius: 50%;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .slider-container input[type='range']::-webkit-slider-thumb:hover {
        transform: scale(1.1);
        background: #c86641;
      }

      .slider-container input[type='range']::-moz-range-thumb {
        width: 16px;
        height: 16px;
        background: var(--anthropic-orange);
        border-radius: 50%;
        border: none;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .value-display {
        font-family: 'Courier New', monospace;
        font-size: 12px;
        color: var(--anthropic-mid-gray);
        min-width: 60px;
        text-align: right;
      }

      .button {
        background: var(--anthropic-orange);
        color: white;
        border: none;
        padding: 10px 16px;
        border-radius: 6px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s ease;
        width: 100%;
      }

      .button:hover {
        background: #c86641;
        transform: translateY(-1px);
      }

      .button:active {
        transform: translateY(0);
      }

      .button.secondary {
        background: var(--anthropic-blue);
      }

      .button.secondary:hover {
        background: #5a8bb8;
      }

      .button.tertiary {
        background: var(--anthropic-green);
      }

      .button.tertiary:hover {
        background: #6b7b52;
      }

      .canvas-area {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        min-width: 0;
      }

      #canvas-container {
        width: 100%;
        max-width: 1000px;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 20px 40px rgba(20, 20, 19, 0.1);
        background: white;
      }

      #canvas-container canvas {
        display: block;
        width: 100% !important;
        height: auto !important;
      }

      @media (max-width: 600px) {
        .container {
          flex-direction: column;
        }

        .sidebar {
          width: 100%;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="sidebar">
        <h1>Shiny Hoarder's Delight</h1>
        <div class="subtitle">
          Goblin Gardens Splash Screen #2 – Goblins hoarding their precious shinies
        </div>

        <div class="control-section">
          <h3>Seed</h3>
          <input
            type="number"
            id="seed-input"
            class="seed-input"
            value="777"
            onchange="updateSeed()"
          />
          <div class="seed-controls">
            <button class="button secondary" onclick="previousSeed()">← Prev</button>
            <button class="button secondary" onclick="nextSeed()">Next →</button>
          </div>
          <button class="button tertiary" onclick="randomSeedAndUpdate()">↻ Random</button>
        </div>

        <div class="control-section">
          <h3>Parameters</h3>

          <div class="control-group">
            <label>Hoard Piles</label>
            <div class="slider-container">
              <input
                type="range"
                id="hoardCount"
                min="1"
                max="6"
                step="1"
                value="3"
                oninput="updateParam('hoardCount', this.value)"
              />
              <span class="value-display" id="hoardCount-value">3</span>
            </div>
          </div>

          <div class="control-group">
            <label>Shiny Spawn Rate</label>
            <div class="slider-container">
              <input
                type="range"
                id="spawnRate"
                min="1"
                max="8"
                step="1"
                value="4"
                oninput="updateParam('spawnRate', this.value)"
              />
              <span class="value-display" id="spawnRate-value">4</span>
            </div>
          </div>

          <div class="control-group">
            <label>Shiny Size</label>
            <div class="slider-container">
              <input
                type="range"
                id="shinySize"
                min="3"
                max="12"
                step="1"
                value="6"
                oninput="updateParam('shinySize', this.value)"
              />
              <span class="value-display" id="shinySize-value">6</span>
            </div>
          </div>

          <div class="control-group">
            <label>Gravity Strength</label>
            <div class="slider-container">
              <input
                type="range"
                id="gravity"
                min="0.1"
                max="0.8"
                step="0.1"
                value="0.3"
                oninput="updateParam('gravity', this.value)"
              />
              <span class="value-display" id="gravity-value">0.3</span>
            </div>
          </div>

          <div class="control-group">
            <label>Attraction Force</label>
            <div class="slider-container">
              <input
                type="range"
                id="attraction"
                min="0.5"
                max="3.0"
                step="0.5"
                value="1.5"
                oninput="updateParam('attraction', this.value)"
              />
              <span class="value-display" id="attraction-value">1.5</span>
            </div>
          </div>
        </div>

        <div class="control-section">
          <h3>Actions</h3>
          <button class="button" onclick="resetParameters()">Reset</button>
        </div>
      </div>

      <div class="canvas-area">
        <div id="canvas-container"></div>
      </div>
    </div>

    <script>
      let params = {
        seed: 777,
        hoardCount: 3,
        spawnRate: 4,
        shinySize: 6,
        gravity: 0.3,
        attraction: 1.5,
      };

      let defaultParams = { ...params };

      let shinies = [];
      let hoards = [];
      let frameCounter = 0;

      const SHINY_TYPES = [
        {
          name: 'gold',
          colors: [
            [255, 215, 0],
            [218, 165, 32],
            [255, 223, 0],
          ],
        },
        {
          name: 'silver',
          colors: [
            [192, 192, 192],
            [169, 169, 169],
            [211, 211, 211],
          ],
        },
        {
          name: 'copper',
          colors: [
            [184, 115, 51],
            [205, 127, 50],
            [138, 119, 91],
          ],
        },
        {
          name: 'bronze',
          colors: [
            [205, 127, 50],
            [176, 141, 87],
            [150, 113, 23],
          ],
        },
      ];

      function setup() {
        let canvas = createCanvas(1200, 1200);
        canvas.parent('canvas-container');
        initializeSystem();
      }

      function initializeSystem() {
        randomSeed(params.seed);
        noiseSeed(params.seed);

        shinies = [];
        hoards = [];
        frameCounter = 0;

        // Create hoard locations
        for (let i = 0; i < params.hoardCount; i++) {
          hoards.push({
            x: random(250, width - 250),
            y: height - 150 + random(-30, 30),
            shinies: [],
          });
        }

        background(40, 35, 30); // Dark goblin cave
      }

      function draw() {
        // Dark background with slight fade
        fill(40, 35, 30, 8);
        noStroke();
        rect(0, 0, width, height);

        frameCounter++;

        // Spawn new shinies
        if (frameCounter % (10 - params.spawnRate) === 0) {
          shinies.push(new Shiny());
        }

        // Update and draw shinies
        for (let i = shinies.length - 1; i >= 0; i--) {
          shinies[i].applyForces();
          shinies[i].update();
          shinies[i].display();

          // Check if collected by hoard
          if (shinies[i].isCollected()) {
            shinies.splice(i, 1);
          }
        }

        // Draw hoard indicators (subtle glow)
        for (let hoard of hoards) {
          noStroke();
          fill(255, 215, 0, 15);
          circle(hoard.x, hoard.y, 200);
          fill(255, 215, 0, 30);
          circle(hoard.x, hoard.y, 100);
        }
      }

      class Shiny {
        constructor() {
          // Spawn from edges
          if (random() < 0.5) {
            this.pos = createVector(random() < 0.5 ? -20 : width + 20, random(100, height - 100));
          } else {
            this.pos = createVector(random(width), -20);
          }

          this.vel = createVector(random(-1, 1), random(0.5, 2));
          this.acc = createVector(0, 0);
          this.size = params.shinySize * random(0.7, 1.3);
          this.type = random(SHINY_TYPES);
          this.color = random(this.type.colors);
          this.rotation = random(TWO_PI);
          this.rotSpeed = random(-0.05, 0.05);
          this.collected = false;
          this.targetHoard = random(hoards);
        }

        applyForces() {
          this.acc.mult(0);

          // Gravity
          this.acc.add(createVector(0, params.gravity));

          // Attraction to nearest hoard
          let force = createVector(
            this.targetHoard.x - this.pos.x,
            this.targetHoard.y - this.pos.y
          );
          let dist = force.mag();

          if (dist < 10) {
            this.collected = true;
            return;
          }

          let strength = (params.attraction * 10) / max(dist, 50);
          force.setMag(strength);
          this.acc.add(force);
        }

        update() {
          if (this.collected) return;

          this.vel.add(this.acc);
          this.vel.limit(6);
          this.pos.add(this.vel);
          this.rotation += this.rotSpeed;
        }

        display() {
          if (this.collected) return;

          push();
          translate(this.pos.x, this.pos.y);
          rotate(this.rotation);

          // Metallic shine effect
          noStroke();

          // Shadow
          fill(0, 0, 0, 80);
          circle(2, 2, this.size);

          // Main color
          fill(this.color[0], this.color[1], this.color[2]);
          circle(0, 0, this.size);

          // Highlight
          fill(this.color[0] + 40, this.color[1] + 40, this.color[2] + 40, 200);
          circle(-this.size * 0.2, -this.size * 0.2, this.size * 0.4);

          // Glint
          fill(255, 255, 255, 150);
          circle(-this.size * 0.25, -this.size * 0.25, this.size * 0.2);

          pop();
        }

        isCollected() {
          return this.collected || this.pos.y > height + 50;
        }
      }

      function updateParam(paramName, value) {
        params[paramName] = parseFloat(value);
        document.getElementById(paramName + '-value').textContent = value;

        if (paramName === 'hoardCount') {
          initializeSystem();
        }
      }

      function updateSeedDisplay() {
        document.getElementById('seed-input').value = params.seed;
      }

      function updateSeed() {
        let input = document.getElementById('seed-input');
        let newSeed = parseInt(input.value);
        if (newSeed && newSeed > 0) {
          params.seed = newSeed;
          initializeSystem();
        } else {
          updateSeedDisplay();
        }
      }

      function previousSeed() {
        params.seed = Math.max(1, params.seed - 1);
        updateSeedDisplay();
        initializeSystem();
      }

      function nextSeed() {
        params.seed = params.seed + 1;
        updateSeedDisplay();
        initializeSystem();
      }

      function randomSeedAndUpdate() {
        params.seed = Math.floor(Math.random() * 999999) + 1;
        updateSeedDisplay();
        initializeSystem();
      }

      function resetParameters() {
        params = { ...defaultParams };

        document.getElementById('hoardCount').value = params.hoardCount;
        document.getElementById('hoardCount-value').textContent = params.hoardCount;
        document.getElementById('spawnRate').value = params.spawnRate;
        document.getElementById('spawnRate-value').textContent = params.spawnRate;
        document.getElementById('shinySize').value = params.shinySize;
        document.getElementById('shinySize-value').textContent = params.shinySize;
        document.getElementById('gravity').value = params.gravity;
        document.getElementById('gravity-value').textContent = params.gravity;
        document.getElementById('attraction').value = params.attraction;
        document.getElementById('attraction-value').textContent = params.attraction;

        updateSeedDisplay();
        initializeSystem();
      }

      window.addEventListener('load', function () {
        updateSeedDisplay();
      });
    </script>
  </body>
</html>
